<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<title>后台管理页面</title>

<!-- 需要引用的CSS -->
<link rel="shortcut icon" href="../../site.ico" />
<link rel="stylesheet" type="text/css" href="../../dist/skin/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="../../dist/skin/css/font-awesome.css" />
<link rel="stylesheet" type="text/css" href="../../dist/skin/css/ui.css" />
<link rel="stylesheet" type="text/css" href="../../dist/skin/css/form.css" />
<link rel="stylesheet" type="text/css" href="menubar.css" />
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<sitemesh:write property='head' />
</head>
<body>
	<!-- 页面结构 -->
	<!-- 左侧内容 -->
	<!-- 带文字菜单 -->
	<div class="ue-menu-left">
		<div class="ue-left-top">
			<img src="image/logo.png" />
		</div>
		<div class="ue-left-content">
			<div class="ue-vmenu">
				<ul>
					<li class="left-overview active" onclick="loadMenuClick(this)">
						<a><i class="fa fa-tachometer"></i>总览</a>
					</li>
					<li class="left-repo" onclick="loadMenuClick(this)">
						<a><i class="fa fa-gear"></i>代码仓库</a>
					</li>
					<li class="left-check" onclick="loadMenuClick(this)">
						<a><i class="fa fa-puzzle-piece"></i>代码检查</a>
					</li>
					<li class="left-build" onclick="loadMenuClick(this)">
						<a><i class="fa fa-wrench"></i>代码构建</a>
					</li>
					<li class="left-server"><a><i class="fa fa-server"></i>运行服务</a>
						<ul>
							<li class="left-cae" onclick="loadMenuClick(this)">
								<a><i class="fa fa-globe"></i>应用引擎</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- 图标菜单 -->
	<div class="icon-menu" style="display: none;">
		<div class="icon-menu-top">
			<img src="image/logo.png" />
		</div>
		<div class="icon-menu-content">
			<ul>
				<li class="left-overview active" onclick="loadMenuClick(this)">
					<a><i class="fa fa-tachometer"></i></a>
				</li>
				<li class="left-repo" onclick="loadMenuClick(this)">
					<a><i class="fa fa-gear"></i></a>
				</li>
				<li class="left-check" onclick="loadMenuClick(this)">
					<a><i class="fa fa-puzzle-piece"></i></a>
				</li>
				<li class="left-build" onclick="loadMenuClick(this)">
					<a><i class="fa fa-wrench"></i></a>
				</li>
				<li class="left-server" onclick="loadMenuClick(this)">
					<a><i class="fa fa-server"></i></a>
					<ul class="icon-menu-second" style="display: none;">
						<li class="left-cae" onclick="loadMenuClick(this)"><a>应用引擎</a></li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
	<!-- 右侧内容 -->
	<div class="menu-right">
		<div class="menu-right-top">
			<div id="menuShow" onclick="switchNavbar()">
				<i class="fa fa-dedent"></i>
			</div>
			<div class="login-msg">
				<a href="#" class="doc">文档</a>
				<a href="#"> 
					<span>admin</span> 
					<span class="fa fa-caret-down"></span>
				</a>
			</div>
		</div>
		<div class="crum">
			<ol class="breadcrumb">
				<li><a href="#">Home</a></li>
			</ol>
		</div>
		<div style="background-color: #f6f6f6;">
			<sitemesh:write property='body' />
			<div class="menu-right-content">
				<h3>说明</h3>
				<p>
					本页面是一个综合页面，由一个左侧菜单栏和顶部菜单栏组成，左侧菜单栏是个可收缩菜单栏，当点击顶部菜单栏&nbsp;&nbsp;<span
						class="fa fa-dedent"></span>&nbsp;&nbsp;图标
					时左侧垂直菜单会收缩，取而代之的是左侧会显示图标菜单。
				</p>
				<p>
					<code>组件效果：</code>
				</p>
				<p>
					1.点击&nbsp;&nbsp;<span class="fa fa-dedent"></span>&nbsp;&nbsp;实现普通垂直菜单和图标菜单的切换功能。
				</p>
				<p>2.当在其中一个菜单中选择某一项，切换菜单后此选择项会在另外一个菜单中被选择。</p>
				<p>3.当菜单处于图标垂直菜单的时候，菜单中只会显示一级菜单的图标，其他子菜单会被隐藏，若其有子菜单，当鼠标滑过一级菜单时，子菜单会显示。</p>
				<p>注意：</p>
				<p>本页面采用的是sitemesh框架，点击左侧菜单栏其中一个选项时整个页面会刷新，这是需要注意的问题是刷新之前选择的选项会被刷新。这里可以选择使用
					过滤器或者cookie来记录当前选中的值和所处的菜单状态。</p>
			</div>
		</div>
	</div>

	<!-- 需要引用的JS -->
	<script type="text/javascript" src="../../dist/js/jquery.js"></script>
	<script type="text/javascript" src="../../dist/js/bootstrap.js"></script>
	<script type="text/javascript" src="../../dist/js/form.js"></script>
	<script type="text/javascript">
		$(function() {
			$('.ue-vmenu').vmenu({
				autostart : 0,
				autohide : 0
			});
			initMenuStatus();
			$(document).on("click",".ue-menu-left ul li",function(){
				$(this).addClass("active").siblings().removeClass("active");
			});
			$(document).on("click",".icon-menu ul li",function(){
				$(this).addClass("active").siblings().removeClass("active");
			});
		});
		function initMenuStatus() {
			var flag = getCookie('devops-menu-status') == 'icon';
			foldMenu(flag);
		}
		// 切换菜单
		function switchNavbar() {
			if (getCookie("devops-menu-status") == 'icon') {
				foldMenu(false);
			} else {
				foldMenu(true);
			}
		}

		// 折叠菜单
		function foldMenu(status) {
			var leftX = $(".ue-menu-left").position().left;
			var width = $(".ue-menu-left").width();
			var active = getCookie('devops-menu-active');
			if (status) {
				$(".icon-menu").show();
				$(".ue-menu-left").animate({
					left : -width
				}, 500, function() {
					$(".menu-right").find("i").removeClass("fa-dedent");
					$(".menu-right").find("i").addClass("fa-indent");
				});
				$(".menu-right").animate({
					left : '50px'
				}, 500);
				setCookie("devops-menu-status", "icon");

				$("." + active).addClass("active").siblings().removeClass("active");
			} else {
				$(".ue-menu-left").animate({
					left : 0
				}, 500, function() {
					$(".menu-right").find("i").removeClass("fa-indent");
					$(".menu-right").find("i").addClass("fa-dedent");
					$(".icon-menu").hide();
				});
				$(".menu-right").animate({
					left : width
				}, 500);

				setCookie("devops-menu-status", "normal");
				$("." + active).addClass("active").siblings().removeClass("active");
			}
		}
		//图标菜单二级菜单显示
		$(function() {
			$(".icon-menu-content ul li").hover(function() {
				var _this = $(this).find("ul");
				_this.show();
			}).focus(function() {
				var _this = $(this).find("ul");
				_this.show();
			}).mouseleave(function() {
				$(this).find("ul").hide();
			});

		});
		// 设置cookie
		function setCookie(cname, cvalue) {
			document.cookie = cname + "=" + cvalue + "; path="
					+ getContextPath();
		}

		// 获取cookie值
		function getCookie(cname) {
			var name = cname + "=";
			var ca = document.cookie.split(';');
			for (var i = 0; i < ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') {
					c = c.substring(1);
				}
				if (c.indexOf(name) == 0) {
					return c.substring(name.length, c.length);
				}
			}
			return "";
		}
		// 获取应用上下文
		function getContextPath() {
			return window.location.pathname.substring(0,
					window.location.pathname.indexOf("/", 2));
		}
		function loadMenuClick(obj) {
			var flag = $(obj).attr("class");
			setCookie('devops-menu-active', flag);
			if (flag == 'left-overview') {
				sticky("总览");
			} else if (flag == 'left-repo') {
				sticky("代码仓库");
			} else if (flag == 'left-check') {
				sticky("代码检查");
			} else if (flag == 'left-build') {
				sticky("代码构建");
			} else if (flag == 'left-cae') {
				sticky("应用引擎");
			}
		}
		function sticky(linkClick) {
			$.sticky(
				 linkClick,
			{
				 style : 'success',
				 autoclose : 1000,
				 position : 'top'
			});
		}
	</script>
</body>
</html>